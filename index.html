<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Aura Motors</title>
    <link rel="stylesheet" href="./styles/index.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <meta name="viewport" content="width=device-width, inicial-s">
  </head>

  <body>
      
    <header>
      <nav>
        <ul>
          <li><a href="index.html"><img src="./images/logo.png" alt="logo"></a></li>
          <li><a href="login.html"><span class="material-symbols-outlined">
            account_circle
            </span>Login</a></li>
        </ul>
      </nav>
    </header>

    <div class="search">
      <select name="marca" id="filterMarca">
        <option value="" disabled selected>Marca</option>
        <option value="nissan">Nissan</option>
        <option value="honda">Honda</option>
        <option value="fiat">Fiat</option>
      </select>
      <select name="modelo" id="filterModelo">
        <option value="" disabled selected>Modelo</option>
        <option value="silvia">Silvia</option>
        <option value="palio">Palio</option>
        <option value="civic">Civic</option>
      </select>
      <select name="localizacao" id="filterLocal">
        <option value="" disabled selected>Localização</option>
        <option value="patos">Patos de Minas</option>
        <option value="uberlandia">Uberlândia</option>
        <option value="ituiutaba">Ituiutaba</option>
      </select>
    </div>
    <hr>

    <main id="carrosContainer">
    </main>

    <footer>
      <address>
        Av. João Naves de Ávila, 2121 - Santa Mônica, Uberlândia - MG
      </address>
    </footer>

    <script>
      async function carregarCarros() {
        try {
          const resposta = await fetch('./phpServer/controlador.php?acao=listarAnuncios');
          const carros = await resposta.json();
    
          const container = document.getElementById('carrosContainer');
          carros.forEach(carro => {
            const card = document.createElement('a');
            card.href = `detalheInteresse.html?id=${carro.id}`;
    
            card.innerHTML = `
              <div class="card">
                <img src="./images/${carro.imagem}" alt="${carro.modelo}">
                <h1>${carro.modelo}</h1>
                <div class="descricao">
                  <p><span class="material-symbols-outlined">car_tag</span> ${carro.marca}</p>
                  <p><span class="material-symbols-outlined">calendar_month</span> ${carro.ano}</p>
                  <p><span class="material-symbols-outlined">location_on</span> ${carro.localizacao}</p>
                </div>
                <div class="preco">
                  <span>R$ ${parseFloat(carro.preco).toLocaleString('pt-BR', { minimumFractionDigits: 2 })}</span>
                </div>
              </div>
              `;

    
            container.appendChild(card);
          });
    
        } catch (erro) {
          console.error("Erro ao carregar os carros:", erro);
        }
      }
    
      // Executa ao carregar a página
      carregarCarros();
    </script>

  </body>
</html>
