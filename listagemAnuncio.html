<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Aura Motors</title>
    <link rel="stylesheet" href="./styles/listagemAnuncio.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <meta name="viewport" content="width=device-width, inicial-s">
  </head>

  <body>
      
    <header>
      <nav>
        <ul class="nav-links">
          <li class="home"><a href="menuRestrito.html"><img src="./images/logo.png" alt="logo"></a></li>
          
          <div class="anuncioOptions">
            <a href="cadastroVeiculo.html">Criar Anúncio</a>
            <a href="">Meus Anúncios</a>
          </div>
          
          <li><a href="login.html" class="logoff"><span class="material-symbols-outlined">
            account_circle
            </span>Logoff</a></li>
        </ul>
      </nav>
      <div class="hamburger" onclick="toggleMenu()">
        ☰
      </div>
    </header>

    <h3>Seus Anúncios:</h3>

    <div class="search">
      <select name="marca" id="filterMarca">
        <option value="" disabled selected>Marca</option>
        <option value="nissan">Nissan</option>
        <option value="honda">Honda</option>
        <option value="fiat">Fiat</option>
      </select>
      <select name="modelo" id="filterModelo">
        <option value="" disabled selected>Modelo</option>
        <option value="silvia">Silvia</option>
        <option value="palio">Palio</option>
        <option value="civic">Civic</option>
      </select>
      <select name="localizacao" id="filterLocal">
        <option value="" disabled selected>Localização</option>
        <option value="patos">Patos de Minas</option>
        <option value="uberlandia">Uberlândia</option>
        <option value="ituiutaba">Ituiutaba</option>
      </select>
    </div>
    <hr>

    <main>
        <div class="card">
            <img src="./images/hb201.jpg" alt="Carros">
            <h1>HB20 Confort</h1>
            <div class="descricao">
                <p>
                    <span class="material-symbols-outlined">
                    car_tag
                    </span> Hyundai
                </p>
                <p>
                    <span class="material-symbols-outlined">
                    calendar_month
                    </span> 2024
                </p>
                <p>
                    <span class="material-symbols-outlined">
                    location_on
                    </span> Uberlândia
                </p>
            </div>
            <div class="options">
                <a href="detalhe.html">Detalhes</a>
                <a href="listagemInteresse.html">Interesses</a>
                <button class="lixeira">
                    Excluir
                </button>
            </div>
        </div>
        <div class="card">
            <img src="./images/vectra1.jpg" alt="Carros">
            <h1>Vectra GLS</h1>
            <div class="descricao">
                <p>
                    <span class="material-symbols-outlined">
                    car_tag
                    </span> Chevrolet
                </p>
                <p>
                    <span class="material-symbols-outlined">
                    calendar_month
                    </span> 2002-2003
                </p>
                <p>
                    <span class="material-symbols-outlined">
                    location_on
                    </span> Araguari
                </p>
            </div>
            <div class="options">
                <a href="detalhe.html">Detalhes</a>
                <a href="listagemInteresse.html">Interesses</a>
                <button class="lixeira">
                    Excluir
                </button>
            </div>
        </div>
    </main>

    <footer>
      <address>
        Av. João Naves de Ávila, 2121 - Santa Mônica, Uberlândia - MG
      </address>
    </footer>

    <script src="./scripts/verifica.js"></script>

    <script>

        function toggleMenu() {

            const navLinks = document.querySelector('.nav-links');
            navLinks.classList.toggle('active');

            document.addEventListener('click', function(event) {
                const nav = document.querySelector('.nav-links');
                const hamburger = document.querySelector('.hamburger');

                if (!nav.contains(event.target) && !hamburger.contains(event.target)) {
                    nav.classList.remove('active');
                }
            })

        }

        const deleteButtons = document.querySelectorAll(".lixeira");

        deleteButtons.forEach(button => {
            button.onclick = function () {
                const confirmDelete = confirm("Deseja mesmo excluir o anúncio?");
                if (confirmDelete) {
                    const card = button.closest('.card');
                    if (card) {
                        card.style.display = 'none';
                    }
                }
            };
        });

        window.addEventListener('load', () => {
          const buttonLogoff = document.querySelector('#logoff');
          buttonLogoff.onclick = async () => {
              try {
                  const response = await fetch("./phpServer/controladorRestrito.php?acao=logout");
                  if (!response.ok) throw new Error(response.statusText);
                  window.location = "./index.html";
              } catch (e) {
                  console.error(e);
              }
          };
        });

    </script>

  </body>
</html>
